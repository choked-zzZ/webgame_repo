<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>登录 - 弈梦</title>
  <link href="style.css" rel="stylesheet">
</head>

<body>
  <header>
    <div class="title">
      <nav>
        <div class="logo">Go for the unbound</div>
      </nav>
    </div>
  </header>

  <main class="auth-container">
    <div class="auth-card">
      <h2>账号登录</h2>
      <div id="message" class="message" style="display: none;"></div>
      
      <form id="loginForm" class="auth-form" onsubmit="return validateForm();">
        <div class="form-group">
          <label for="loginUsername">用户名/邮箱</label>
          <input type="text" id="loginUsername" name="loginUsername" required>
        </div>
        
        <div class="form-group">
          <label for="loginPassword">密码</label>
          <input type="password" id="loginPassword" name="loginPassword" required>
        </div>
        
        <div style="text-align: right; margin-bottom: 20px;">
          <a href="#" id="forgotPassword" class="link">忘记密码？</a>
        </div>
        
        <div class="form-actions">
          <button type="submit" class="btn btn-secondary">登录</button>
        </div>
      </form>
      
      <p class="auth-link">
        还没有账号？<a href="register.html">立即注册</a>
      </p>
      <div class="home-link">
        <a href="../index.html" class="btn btn-secondary">首页</a>
      </div>
    </div>
    <div class="right-image"></div>
  </main>


  <script>
    // 全局登录验证函数
    function validateForm() {
      const username = document.getElementById('loginUsername').value.trim();
      const password = document.getElementById('loginPassword').value;

      if (username && password) {
        showMessage('登录成功，正在跳转到主界面...', 'success');
        // 设置登录状态到localStorage
        localStorage.setItem('isLoggedIn', 'true');
        // 使用相对路径跳转到首页
        setTimeout(() => {
          // 动态构造根目录路径，适配本地文件和服务器环境
          const baseUrl = window.location.href.split('/main_page/')[0];
          window.location.href = baseUrl + '/index.html';
        }, 1500);
        return false;
      } else {
        showMessage('请输入用户名和密码', 'error');
        return false;
      }
    }

    // 全局消息显示函数
    function showMessage(message, type) {
      const messageElement = document.getElementById('message');
      messageElement.textContent = message;
      messageElement.className = `message ${type}`;
      messageElement.style.display = 'block';

      messageElement.style.opacity = '0';
      messageElement.style.transition = 'opacity 0.3s ease';
      setTimeout(() => {
        messageElement.style.opacity = '1';
      }, 10);

      setTimeout(() => {
        messageElement.style.opacity = '0';
        setTimeout(() => {
          messageElement.style.display = 'none';
        }, 300);
      }, 5000);
    }

    document.addEventListener('DOMContentLoaded', function() {
      const usernameInput = document.getElementById('loginUsername');
      const passwordInput = document.getElementById('loginPassword');

      // 输入框动画效果
      const inputs = document.querySelectorAll('.form-group input');
      inputs.forEach(input => {
        input.addEventListener('focus', function() {
          this.parentElement.classList.add('focused');
        });
        input.addEventListener('blur', function() {
          if (!this.value) {
            this.parentElement.classList.remove('focused');
          }
        });

        // 输入内容检测
        input.addEventListener('input', function() {
          if (this.value) {
            this.parentElement.classList.add('has-value');
          } else {
            this.parentElement.classList.remove('has-value');
          }
        });
      });

      // 忘记密码链接
      document.getElementById('forgotPassword').addEventListener('click', function(e) {
        e.preventDefault();
        showMessage('密码找回功能即将上线，敬请期待', 'error');
      });
    });
  </script>
</body>

</html>